<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      function parseUrlParams(url) {
        const paramsStr = url.split("?")[1];
        const params = paramsStr.split("&");
        const res = {};
        for (const item of params) {
          const [key, value] = item.split("=");
          const parsedValue = decodeURIComponent(value);
          if (res[key] === undefined) {
            res[key] = parsedValue;
          } else {
            res[key] = [res[key], parsedValue];
          }
        }
        return res;
      }
      let url =
        "http://www.domain.com/?user=anonymous&id=123&id=456&city=%E5%8C%97%E4%BA%AC&enabled";
      console.log(parseUrlParams(url));
    </script>
  </body>
</html>
